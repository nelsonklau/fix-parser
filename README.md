## FIX Parser

FIX Parser aims to accept a FIX message in the form of byte array and display a well-formed FIX message string.

The program spins up and prompts the byte array FIX message. The converted FIX message string is pretty printed in 
CLI stdout.

### Getting Started

Clone this repository to your local directory. The following prerequisites are required.

1. This project runs on JVM 17, ensure to install JDK 17 either from 
   - [Oracle](https://www.oracle.com/hk/java/technologies/downloads/#java17) in Windows
   - [Homebrew](https://docs.brew.sh/Installation) in MacOS, then run 
`brew update && brew upgrade && brew install openjdk17`
   - Run in Ubuntu `sudo apt update && sudo apt upgrade && sudo apt install openjdk-17-jdk`
2. Verify JDK 17 are correctly installed by running `java --version`, expecting output:

    ```
    openjdk version "17.0.15" 2025-04-15
    OpenJDK Runtime Environment Homebrew (build 17.0.15+0)
    OpenJDK 64-Bit Server VM Homebrew (build 17.0.15+0, mixed mode, sharing)
    ```

3. Install Gradle 8.12 or use the pre-packaged Gradle wrapper to build the project

Run either one of the following commands in bash or zsh to build FIX Parser.

1. Build and test FIX Parser from scratch.
 
    ```bash
    ./gradlew clean build
    ```

2. Build FIX Parser from scratch without running tests.

    ```bash
    ./gradlew clean build -x test
    ```

### Design Philosophy

#### Use a buffer to read the byte array FIX message

Consider the following Logon (A) FIX message having the corresponding byte array representation, where a control character SOH
(Start of Heading) has 0x01 and a printable character = (Equals) has 0x3d.

      8=FIX.4.49=10235=A49=BuySide56=SellSide34=152=20190605-11:40:30.39298=0108=30141=Y553=Username554=Password10=104

      0x38, 0x3d, 0x46, 0x49, 0x58, 0x2e, 0x34, 0x2e, 0x34, 0x01, 0x39, 0x3d, 0x31, 0x30, 0x32, 0x01, 0x33, 0x35, 0x3d, 0x41, 0x01, 0x34, 0x39, 0x3d, 0x42, 0x75, 0x79, 0x53, 0x69, 0x64, 0x65, 0x01, 0x35, 0x36, 0x3d, 0x53, 0x65, 0x6c, 0x6c, 0x53, 0x69, 0x64, 0x65, 0x01, 0x33, 0x34, 0x3d, 0x31, 0x01, 0x35, 0x32, 0x3d, 0x32, 0x30, 0x31, 0x39, 0x30, 0x36, 0x30, 0x35, 0x2d, 0x31, 0x31, 0x3a, 0x34, 0x30, 0x3a, 0x33, 0x30, 0x2e, 0x33, 0x39, 0x32, 0x01, 0x39, 0x38, 0x3d, 0x30, 0x01, 0x31, 0x30, 0x38, 0x3d, 0x33, 0x30, 0x01, 0x31, 0x34, 0x31, 0x3d, 0x59, 0x01, 0x35, 0x35, 0x33, 0x3d, 0x55, 0x73, 0x65, 0x72, 0x6e, 0x61, 0x6d, 0x65, 0x01, 0x35, 0x35, 0x34, 0x3d, 0x50, 0x61, 0x73, 0x73, 0x77, 0x6f, 0x72, 0x64, 0x01, 0x31, 0x30, 0x3d, 0x31, 0x30, 0x34, 0x5e

A buffer is a linked list consuming each byte from the FIX message until it reaches SOH (0x01) or
Equals (0x3d) characters. If it reaches Equals (0x3d) character , the buffer is converted into a float FIX field tag. 
If it reaches SOH (0x01) character, the buffer remains the same as FIX field value.

Using a float FIX field tag is because there can be duplicated tag, the decimal place digits are to distinguish and 
arrange the duplicated tags in order. See New Order Single (D) FIX message in the next section.

#### Use a map to store the buffer

Consider the following New Order Single (D) FIX message.

      8=FIX.4.49=14835=D34=108049=TESTBUY152=20180920-18:14:19.50856=TESTSELL111=63673064027889863415=USD21=238=7000854=040=154=155=MSFT48=MSFT.OQ22=5454=4455=MSFT US456=A455=US5949181045456=4455=2588173456=2455=594918104456=160=20180920-18:14:19.49210=092

      0x38, 0x3d, 0x46, 0x49, 0x58, 0x2e, 0x34, 0x2e, 0x34, 0x01, 0x39, 0x3d, 0x31, 0x34, 0x38, 0x01, 0x33, 0x35, 0x3d, 0x44, 0x01, 0x33, 0x34, 0x3d, 0x31, 0x30, 0x38, 0x30, 0x01, 0x34, 0x39, 0x3d, 0x54, 0x45, 0x53, 0x54, 0x42, 0x55, 0x59, 0x31, 0x01, 0x35, 0x32, 0x3d, 0x32, 0x30, 0x31, 0x38, 0x30, 0x39, 0x32, 0x30, 0x2d, 0x31, 0x38, 0x3a, 0x31, 0x34, 0x3a, 0x31, 0x39, 0x2e, 0x35, 0x30, 0x38, 0x01, 0x35, 0x36, 0x3d, 0x54, 0x45, 0x53, 0x54, 0x53, 0x45, 0x4c, 0x4c, 0x31, 0x01, 0x31, 0x31, 0x3d, 0x36, 0x33, 0x36, 0x37, 0x33, 0x30, 0x36, 0x34, 0x30, 0x32, 0x37, 0x38, 0x38, 0x39, 0x38, 0x36, 0x33, 0x34, 0x01, 0x31, 0x35, 0x3d, 0x55, 0x53, 0x44, 0x01, 0x32, 0x31, 0x3d, 0x32, 0x01, 0x33, 0x38, 0x3d, 0x37, 0x30, 0x30, 0x30, 0x01, 0x38, 0x35, 0x34, 0x3d, 0x30, 0x01, 0x34, 0x30, 0x3d, 0x31, 0x01, 0x35, 0x34, 0x3d, 0x31, 0x01, 0x35, 0x35, 0x3d, 0x4d, 0x53, 0x46, 0x54, 0x01, 0x34, 0x38, 0x3d, 0x4d, 0x53, 0x46, 0x54, 0x2e, 0x4f, 0x51, 0x01, 0x32, 0x32, 0x3d, 0x35, 0x01, 0x34, 0x35, 0x34, 0x3d, 0x34, 0x01, 0x34, 0x35, 0x35, 0x3d, 0x4d, 0x53, 0x46, 0x54, 0x20, 0x55, 0x53, 0x01, 0x34, 0x35, 0x36, 0x3d, 0x41, 0x01, 0x34, 0x35, 0x35, 0x3d, 0x55, 0x53, 0x35, 0x39, 0x34, 0x39, 0x31, 0x38, 0x31, 0x30, 0x34, 0x35, 0x01, 0x34, 0x35, 0x36, 0x3d, 0x34, 0x01, 0x34, 0x35, 0x35, 0x3d, 0x32, 0x35, 0x38, 0x38, 0x31, 0x37, 0x33, 0x01, 0x34, 0x35, 0x36, 0x3d, 0x32, 0x01, 0x34, 0x35, 0x35, 0x3d, 0x35, 0x39, 0x34, 0x39, 0x31, 0x38, 0x31, 0x30, 0x34, 0x01, 0x34, 0x35, 0x36, 0x3d, 0x31, 0x01, 0x36, 0x30, 0x3d, 0x32, 0x30, 0x31, 0x38, 0x30, 0x39, 0x32, 0x30, 0x2d, 0x31, 0x38, 0x3a, 0x31, 0x34, 0x3a, 0x31, 0x39, 0x2e, 0x34, 0x39, 0x32, 0x01, 0x31, 0x30, 0x3d, 0x30, 0x39, 0x32

A map of float to byte array stores the float FIX field tag and FIX field value, which are tentatively held by the 
buffer.

The above New Order Single (D) FIX message has duplicated tags, i.e. SecurityAltID (455), SecurityAltIDSource (456).
The number of occurrences is stored in NoSecurityAltID (454). In view of the map internal buckets, the duplicated tags
are stored as:

      +-----------------------------+
      | NoSecurityAltID (454.0)     | ---> 0x34 (aka '4')
      +-----------------------------+
      | SecurityAltID (455.0)       | ---> 0x4d, 0x53, 0x46, 0x54, 0x20, 0x55, 0x53 (aka 'MSFT US')
      +-----------------------------+
      | SecurityAltIDSource (456.0) | ---> 0x41 (aka 'A' Bloomberg Symbol)
      +-----------------------------+
      | SecurityAltID (455.1)       | ---> 0x55, 0x53, 0x35, 0x39, 0x34, 0x39, 0x31, 0x38, 0x31, 0x30, 0x34, 0x35 (aka 'US5949181045')
      +-----------------------------+
      | SecurityAltIDSource (456.1) | ---> 0x34 (aka '4' ISIN number)
      +-----------------------------+
      | SecurityAltID (455.2)       | ---> 0x32, 0x35, 0x38, 0x38, 0x31, 0x37, 0x33 (aka '2588173')
      +-----------------------------+
      | SecurityAltIDSource (456.2) | ---> 0x32 (aka '2' SEDOL)
      +-----------------------------+
      | SecurityAltID (455.3)       | ---> 0x35, 0x39, 0x34, 0x39, 0x31, 0x38, 0x31, 0x30, 0x34 (aka '594918104')
      +-----------------------------+
      | SecurityAltIDSource (456.3) | ---> 0x31 (aka '1' CUSIP)
      +-----------------------------+

The map of float to byte array initial capacity is the number of SOH (0x01) characters and load factor is 1, 
expecting each float FIX field tag is allocated a bucket, where load factor = number of entry / number of bucket.

### References

FIX Parser conforms to FIX 4.4 protocols. See [FIX 4.4 Dictionary](https://fix.dev/organizations/fix-standards/specs/1000001/messages).

ASCII control characters (character code 0-31) and printable characters (character code 32-127) are in reference to 
[ASCII Table](https://www.ascii-code.com/ASCII).
